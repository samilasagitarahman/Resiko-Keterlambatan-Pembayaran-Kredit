<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Fintech Credit Risk System | Sistem Risiko Kredit Digital</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.tailwindcss.com"></script>

<style>
/* ===============================
   VIDEO BACKGROUND
================================ */
.video-bg {
    position: fixed;
    inset: 0;
    z-index: -4;
    overflow: hidden;
}

.video-bg video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    filter: brightness(.45) contrast(1.15) saturate(1.1);
}

/* ===============================
   DARK FINTECH OVERLAY
================================ */
.overlay {
    position: fixed;
    inset: 0;
    z-index: -3;
    background:
        radial-gradient(circle at 20% 80%, rgba(56,189,248,.25), transparent 55%),
        radial-gradient(circle at 80% 20%, rgba(99,102,241,.25), transparent 55%),
        linear-gradient(to bottom, rgba(2,6,23,.85), rgba(2,6,23,.95));
}

/* ===============================
   PARTICLE CONSTELLATION
================================ */
canvas {
    position: fixed;
    inset: 0;
    z-index: -2;
}

/* ===============================
   GLASS ENTERPRISE CARD
================================ */
.glass {
    background: linear-gradient(
        180deg,
        rgba(255,255,255,.14),
        rgba(255,255,255,.06)
    );
    backdrop-filter: blur(36px);
    -webkit-backdrop-filter: blur(36px);
    border: 1px solid rgba(255,255,255,.25);
}

.card {
    box-shadow:
        0 60px 160px rgba(0,0,0,.75),
        inset 0 0 1px rgba(255,255,255,.6);
    transition: transform .45s ease;
}

.card:hover {
    transform: translateY(-12px);
}

/* ===============================
   CLEAN TITLE (NO GLOW)
================================ */
.title-clean {
    font-weight: 800;
    letter-spacing: 0.05em;
    color: #e5f3ff;
    text-shadow: none;
}

/* ===============================
   PREMIUM BUTTON
================================ */
.btn {
    background: linear-gradient(
        90deg,
        #38bdf8,
        #6366f1,
        #a78bfa
    );
    background-size: 200% 200%;
    animation: neon 8s linear infinite;
}

@keyframes neon {
    0% { background-position: 0% 50%; }
    100% { background-position: 200% 50%; }
}
</style>
</head>

<body class="min-h-screen flex items-center justify-center px-4 text-white">

<!-- VIDEO -->
<div class="video-bg">
    <video autoplay loop muted playsinline>
        <source src="/assets/bank.mp4" type="video/mp4">
    </video>
</div>

<!-- OVERLAY -->
<div class="overlay"></div>

<!-- PARTICLES -->
<canvas id="particles"></canvas>

<!-- MAIN CARD -->
<div class="card glass relative z-10 w-full max-w-md p-10 rounded-3xl">

    <!-- HEADER -->
    <div class="text-center mb-10">
        <h1 class="text-3xl title-clean text-center">
            Fintech Credit Risk System
        </h1>
        <p class="text-white/80 text-sm mt-3 leading-relaxed">
            Sistem Analisis Risiko Kredit Digital
        </p>
    </div>

    <!-- FORM -->
    <form id="loanForm" class="space-y-5">

        <input id="age" type="number" required placeholder="Usia (Tahun)"
            class="w-full px-5 py-3 rounded-xl bg-white/90 text-gray-800
                   focus:ring-2 focus:ring-sky-400 outline-none transition">

        <input id="income" type="number" required placeholder="Pendapatan Bulanan (Rp)"
            class="w-full px-5 py-3 rounded-xl bg-white/90 text-gray-800
                   focus:ring-2 focus:ring-sky-400 outline-none transition">

        <input id="loanamount" type="number" required placeholder="Jumlah Pinjaman (Rp)"
            class="w-full px-5 py-3 rounded-xl bg-white/90 text-gray-800
                   focus:ring-2 focus:ring-sky-400 outline-none transition">

        <input id="creditscore" type="number" required placeholder="Skor Kredit"
            class="w-full px-5 py-3 rounded-xl bg-white/90 text-gray-800
                   focus:ring-2 focus:ring-sky-400 outline-none transition">

        <button type="submit"
            class="btn w-full py-3 rounded-xl font-semibold tracking-wide text-white">
            Analisis Risiko Kredit
        </button>
    </form>

    <!-- RESULT -->
    <div id="result" class="mt-8 text-center"></div>
</div>

<script>
/* ===============================
   CONSTELLATION PARTICLES
================================ */
const canvas = document.getElementById("particles");
const ctx = canvas.getContext("2d");
let w, h;

function resize() {
    w = canvas.width = window.innerWidth;
    h = canvas.height = window.innerHeight;
}
window.addEventListener("resize", resize);
resize();

const stars = Array.from({length:120}, () => ({
    x: Math.random()*w,
    y: Math.random()*h,
    r: Math.random()*1.6 + .4,
    vx: Math.random()*.3 - .15,
    vy: Math.random()*.3 - .15
}));

function animate() {
    ctx.clearRect(0,0,w,h);

    stars.forEach(s => {
        s.x += s.vx;
        s.y += s.vy;

        if (s.x<0||s.x>w) s.vx*=-1;
        if (s.y<0||s.y>h) s.vy*=-1;

        ctx.beginPath();
        ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
        ctx.fillStyle = "rgba(255,255,255,.7)";
        ctx.fill();
    });

    for(let i=0;i<stars.length;i++){
        for(let j=i+1;j<stars.length;j++){
            const dx = stars[i].x - stars[j].x;
            const dy = stars[i].y - stars[j].y;
            const d = Math.sqrt(dx*dx + dy*dy);
            if(d<120){
                ctx.strokeStyle = `rgba(255,255,255,${1-d/120})`;
                ctx.beginPath();
                ctx.moveTo(stars[i].x, stars[i].y);
                ctx.lineTo(stars[j].x, stars[j].y);
                ctx.stroke();
            }
        }
    }
    requestAnimationFrame(animate);
}
animate();

/* ===============================
   FORM SUBMIT
================================ */
document.getElementById("loanForm").addEventListener("submit", async e => {
    e.preventDefault();
    const r = document.getElementById("result");
    r.innerHTML = "<p class='text-white/80'>Sedang memproses data...</p>";

    const data = {
        Age: +age.value,
        Income: +income.value,
        LoanAmount: +loanamount.value,
        CreditScore: +creditscore.value
    };

    try {
        const res = await fetch("http://127.0.0.1:8000/predict", {
            method: "POST",
            headers: {"Content-Type":"application/json"},
            body: JSON.stringify(data)
        });

        const d = await res.json();
        const color =
            d.risk_level==="LOW"?"text-emerald-300":
            d.risk_level==="MEDIUM"?"text-yellow-300":"text-red-400";

        r.innerHTML = `
            <p class="${color} text-2xl font-bold">
                ${d.risk_level} RISK
            </p>
            <p class="text-white/80 mt-1">
                Probabilitas Gagal Bayar ${(d.default_probability*100).toFixed(2)}%
            </p>`;
    } catch {
        r.innerHTML = "<p class='text-red-300'>Server backend tidak terhubung</p>";
    }
});
</script>

</body>
</html>
