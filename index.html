<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Fintech Credit Risk System | Sistem Risiko Kredit Digital</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.tailwindcss.com"></script>

<style>
/* ===============================
   VIDEO BACKGROUND BANK
================================ */
.video-bg {
    position: fixed;
    inset: 0;
    z-index: -3;
    overflow: hidden;
}

.video-bg video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    filter: brightness(0.55) contrast(1.15) saturate(1.2);
}

/* ===============================
   OVERLAY FUTURISTIK
================================ */
.overlay {
    position: fixed;
    inset: 0;
    z-index: -2;
    background:
        radial-gradient(circle at 30% 70%, rgba(56,189,248,.35), transparent 50%),
        radial-gradient(circle at 80% 30%, rgba(99,102,241,.35), transparent 50%),
        linear-gradient(to bottom, rgba(2,6,23,.75), rgba(2,6,23,.9));
}

/* ===============================
   PARTICLES
================================ */
canvas {
    position: fixed;
    inset: 0;
    z-index: -1;
}

/* ===============================
   GLASSMORPHISM CARD
================================ */
.glass {
    background: rgba(255,255,255,.12);
    backdrop-filter: blur(30px);
    -webkit-backdrop-filter: blur(30px);
    border: 1px solid rgba(255,255,255,.25);
}

.card {
    box-shadow:
        0 40px 120px rgba(0,0,0,.6),
        inset 0 0 .5px rgba(255,255,255,.6);
    transition: transform .4s ease;
}

.card:hover {
    transform: translateY(-10px);
}

/* ===============================
   BUTTON PREMIUM
================================ */
.btn {
    background: linear-gradient(90deg, #38bdf8, #6366f1, #a78bfa);
    background-size: 200% 200%;
    animation: neon 6s linear infinite;
}

@keyframes neon {
    0% { background-position: 0% 50%; }
    100% { background-position: 200% 50%; }
}

/* ===============================
   GLOW TEXT
================================ */
.glow {
    text-shadow:
        0 0 12px rgba(56,189,248,.8),
        0 0 30px rgba(99,102,241,.6);
}
</style>
</head>

<body class="min-h-screen flex items-center justify-center px-4 text-white">

<!-- VIDEO BACKGROUND -->
<div class="video-bg">
    <video autoplay loop muted playsinline>
        <source src="assets/bank.mp4" type="video/mp4">
    </video>
</div>

<!-- OVERLAY -->
<div class="overlay"></div>

<!-- PARTICLES -->
<canvas id="particles"></canvas>

<!-- MAIN CARD -->
<div class="card glass relative z-10 w-full max-w-md p-8 rounded-3xl">

    <div class="text-center mb-8">
        <h1 class="text-3xl font-extrabold glow tracking-wide">
            Fintech Credit Risk System
        </h1>
        <p class="text-white/80 text-sm mt-2">
            Sistem Analisis Risiko Kredit Digital
        </p>
    </div>

    <form id="loanForm" class="space-y-4">

        <input id="age" type="number" required placeholder="Usia (Tahun)"
            class="w-full px-4 py-3 rounded-xl bg-white/90 text-gray-800 focus:ring-2 focus:ring-indigo-400 outline-none">

        <input id="income" type="number" required placeholder="Pendapatan Bulanan (Rp)"
            class="w-full px-4 py-3 rounded-xl bg-white/90 text-gray-800 focus:ring-2 focus:ring-indigo-400 outline-none">

        <input id="loanamount" type="number" required placeholder="Jumlah Pinjaman (Rp)"
            class="w-full px-4 py-3 rounded-xl bg-white/90 text-gray-800 focus:ring-2 focus:ring-indigo-400 outline-none">

        <input id="creditscore" type="number" required placeholder="Skor Kredit"
            class="w-full px-4 py-3 rounded-xl bg-white/90 text-gray-800 focus:ring-2 focus:ring-indigo-400 outline-none">

        <button type="submit"
            class="btn w-full py-3 rounded-xl font-semibold tracking-wide">
            Analisis Risiko
        </button>
    </form>

    <div id="result" class="mt-6 text-center"></div>
</div>

<script>
/* ===============================
   PARTICLE ANIMATION
================================ */
const canvas = document.getElementById("particles");
const ctx = canvas.getContext("2d");
let w, h;

function resize() {
    w = canvas.width = window.innerWidth;
    h = canvas.height = window.innerHeight;
}
window.addEventListener("resize", resize);
resize();

const particles = Array.from({length:120}, () => ({
    x: Math.random()*w,
    y: Math.random()*h,
    r: Math.random()*2+0.5,
    s: Math.random()*0.6+0.2
}));

function animate() {
    ctx.clearRect(0,0,w,h);
    particles.forEach(p => {
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
        ctx.fillStyle = "rgba(255,255,255,.6)";
        ctx.fill();
        p.y -= p.s;
        if (p.y < 0) p.y = h;
    });
    requestAnimationFrame(animate);
}
animate();

/* ===============================
   FORM SUBMIT
================================ */
document.getElementById("loanForm").addEventListener("submit", async e => {
    e.preventDefault();
    const r = document.getElementById("result");
    r.innerHTML = "<p class='text-white/80'>Sedang memproses data...</p>";

    const data = {
        Age: +age.value,
        Income: +income.value,
        LoanAmount: +loanamount.value,
        CreditScore: +creditscore.value
    };

    try {
        const res = await fetch("http://127.0.0.1:8000/predict", {
            method: "POST",
            headers: {"Content-Type":"application/json"},
            body: JSON.stringify(data)
        });

        const d = await res.json();

        const color =
            d.risk_level === "LOW" ? "text-emerald-300" :
            d.risk_level === "MEDIUM" ? "text-yellow-300" :
            "text-red-400";

        r.innerHTML = `
            <p class="${color} text-2xl font-bold glow">
                ${d.risk_level} RISK
            </p>
            <p class="text-white/80 mt-1">
                Probabilitas Gagal Bayar ${(d.default_probability * 100).toFixed(2)}%
            </p>`;
    } catch {
        r.innerHTML = "<p class='text-red-300'>Server backend tidak terhubung</p>";
    }
});
</script>

</body>
</html>
